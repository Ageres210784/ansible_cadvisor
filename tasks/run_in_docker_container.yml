---
# tasks file for cadvisor
- name: Start cadvisor container
  community.docker.docker_container:
    name: "{{ cadvisor_container_name }}"
    image: "{{ cadvisor_image }}"
    volumes:
      - /:/rootfs:ro
      - /var/run:/var/run:ro
      - /sys:/sys:ro
      - /var/lib/docker/:/var/lib/docker:ro
      - /dev/disk/:/dev/disk:ro
    restart_policy: always
    hostname: "{{ ansible_host }}"
    ports:
      - "{{ cadvisor_host_port }}:8080"
    networks:
      default:
        external:
          name: "{{ cadvisor_docker_network_name }}"
